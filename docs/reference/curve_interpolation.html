<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Interpolates of growth curves along reference centiles — curve_interpolation • chartplotter</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Interpolates of growth curves along reference centiles — curve_interpolation"><meta property="og:description" content="By convention, we connect the points of a growth curve by
straight lines. This is OK when ages are relatively close
together. However, for ages that are more apart, the straight
line gives an ugly representation that doesn't follow the real
growth during the interval."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">chartplotter</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.35.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/growthcharts/chartplotter/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Interpolates of growth curves along reference centiles</h1>
    <small class="dont-index">Source: <a href="https://github.com/growthcharts/chartplotter/blob/HEAD/R/curve_interpolation.R" class="external-link"><code>R/curve_interpolation.R</code></a></small>
    <div class="hidden name"><code>curve_interpolation.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>By convention, we connect the points of a growth curve by
straight lines. This is OK when ages are relatively close
together. However, for ages that are more apart, the straight
line gives an ugly representation that doesn't follow the real
growth during the interval.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">curve_interpolation</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  xname <span class="op">=</span> <span class="st">"x"</span>,</span>
<span>  yname <span class="op">=</span> <span class="st">"y"</span>,</span>
<span>  xout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>,</span>
<span>  refcode <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  rule <span class="op">=</span> <span class="fl">2L</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data frame in long format, with columns for person
number (named <code>id</code>), the x and y variables.</p></dd>


<dt id="arg-xname">xname<a class="anchor" aria-label="anchor" href="#arg-xname"></a></dt>
<dd><p>Name of the variable on the horizontal axis.</p></dd>


<dt id="arg-yname">yname<a class="anchor" aria-label="anchor" href="#arg-yname"></a></dt>
<dd><p>Name of the variable on the vertical axis.</p></dd>


<dt id="arg-xout">xout<a class="anchor" aria-label="anchor" href="#arg-xout"></a></dt>
<dd><p>A vector of values for the horizontal axis in the scale
of the variable <code>xname</code>. Only <code>xout</code> points within the
data range of <code>xname</code> are interpolated.</p></dd>


<dt id="arg-refcode">refcode<a class="anchor" aria-label="anchor" href="#arg-refcode"></a></dt>
<dd><p>The name of reference needed to calculate the Z-score
scores and the back-transformation to measured scores. There can only
be one reference.</p></dd>


<dt id="arg-rule">rule<a class="anchor" aria-label="anchor" href="#arg-rule"></a></dt>
<dd><p>The <code>rule</code> argument passed down to <code>approx</code>. The
default here is <code>rule = 2L</code>, so any extrapolations beyond the
ranges of the reference take the closest value (min or max).</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A <code>tibble</code> with five columns: <code>id</code>, xname, yname,
zname and <code>obs</code>. The <code>obs</code> variables signals whether
the point is observed or not.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The <code>curve_interpolation()</code> function provides a solution
for this. It defines a number of additional points (specified
through the <code>xout</code> argument), and calculates the linear
interpolation between these points in the Z-scores metric. After
that, the procedure transforms back the interpolated Z-scores
to the original scale, so the curve points follow the curvy
centiles.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/pkg/centile/man/y2z.html" class="external-link">centile::y2z()</a></code>, <code><a href="https://rdrr.io/pkg/centile/man/z2y.html" class="external-link">centile::z2y()</a></code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Stef van Buuren, 2021</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.2</span>, <span class="fl">1.2</span>, <span class="fl">0.5</span>, <span class="fl">0.1</span>, <span class="fl">1</span>, <span class="fl">1.3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  hgt <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">52</span>, <span class="fl">60</span>, <span class="fl">78</span>, <span class="fl">69</span>, <span class="fl">62</span>, <span class="fl">78</span>, <span class="fl">82</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">refcode</span> <span class="op">&lt;-</span> <span class="st">"nl_1997_hgt_male_nl"</span></span></span>
<span class="r-in"><span><span class="va">xout</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">3</span>, <span class="fl">0.2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">int</span> <span class="op">&lt;-</span> <span class="fu">chartplotter</span><span class="fu">:::</span><span class="fu">curve_interpolation</span><span class="op">(</span><span class="va">data</span>,</span></span>
<span class="r-in"><span>  xname <span class="op">=</span> <span class="st">"age"</span>, yname <span class="op">=</span> <span class="st">"hgt"</span>,</span></span>
<span class="r-in"><span>  xout <span class="op">=</span> <span class="va">xout</span>, refcode <span class="op">=</span> <span class="va">refcode</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">int</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 16 × 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       id   age   hgt   hgt_z obs  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span>     1   0    52    0.327  TRUE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span>     1   0.2  60    0.258  TRUE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span>     1   0.4  65.9  0.113  FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span>     1   0.6  69.9 -<span style="color: #BB0000;">0.032</span><span style="color: #BB0000; text-decoration: underline;">4</span> FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span>     1   0.8  73.0 -<span style="color: #BB0000;">0.178</span>  FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span>     1   1    75.7 -<span style="color: #BB0000;">0.323</span>  FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span>     1   1.2  78   -<span style="color: #BB0000;">0.468</span>  TRUE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span>     2   0.5  69    0.409  TRUE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span>     3   0.1  62    3.00   TRUE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span>     3   0.2  65.7  2.72   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span>     3   0.4  70.9  2.17   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span>     3   0.6  74.1  1.62   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">13</span>     3   0.8  76.3  1.08   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">14</span>     3   1    78    0.528  TRUE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">15</span>     3   1.2  80.7  0.496  FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">16</span>     3   1.3  82    0.48   TRUE </span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Stef van Buuren.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

